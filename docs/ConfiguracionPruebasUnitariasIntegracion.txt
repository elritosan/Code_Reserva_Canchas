ğŸ”§ ConfiguraciÃ³n Completa para Pruebas Unitarias e IntegraciÃ³n
A continuaciÃ³n, se presentan los pasos necesarios para preparar un entorno completo de testing en tu proyecto. Esta configuraciÃ³n incluye pruebas unitarias e integraciÃ³n utilizando Jest, Supertest y otras herramientas clave del ecosistema Node.js.

1ï¸âƒ£ Instalar Dependencias Necesarias
Abre tu terminal en el directorio del backend del proyecto y ejecuta el siguiente comando para instalar las dependencias de desarrollo requeridas:

    npm install --save-dev jest supertest cross-env

Estas herramientas permiten ejecutar pruebas automatizadas en diferentes entornos, realizar pruebas de endpoints HTTP, y manejar variables de entorno.

2ï¸âƒ£ Configurar package.json
Edita tu archivo package.json y agrega los siguientes scripts y configuraciones:

ğŸ§ª Scripts de Testing

    "scripts": {
        "test": "cross-env NODE_ENV=test jest --runInBand --detectOpenHandles",
        "test:unit": "cross-env NODE_ENV=test jest --runInBand test/unit",
        "test:integration": "cross-env NODE_ENV=test jest --runInBand test/integration",
        "test:performance": "jest test/performance/reservaConcurrente.test.js"
    }

âš™ï¸ ConfiguraciÃ³n de Jest

  "jest": {
    "verbose": true,
    "testEnvironment": "node",
    "testMatch": [
      "**/test/**/*.test.js"
    ],
    "collectCoverage": true,
    "coverageDirectory": "./coverage",
    "coveragePathIgnorePatterns": [
      "/node_modules/",
      "/test/"
    ],
    "testTimeout": 10000
  }
  
Esta configuraciÃ³n asegura que:

Se ejecuten Ãºnicamente archivos de prueba que coincidan con el patrÃ³n **/*.test.js.
Se utilice el entorno de Node.js para las pruebas.
Se genere un reporte de cobertura.
Se ignoren carpetas no relevantes durante la recolecciÃ³n de cobertura.

3ï¸âƒ£ Estructura de Archivos de Pruebas
Crea una estructura de carpetas clara dentro del directorio test/ para separar las pruebas unitarias e integraciÃ³n:

/test
  â”œâ”€â”€ unit/
  â”‚   â””â”€â”€ ejemploUnit.test.js
  â””â”€â”€ integration/
      â””â”€â”€ ejemploIntegration.test.js
Esto mejora la organizaciÃ³n y facilita el mantenimiento del cÃ³digo de pruebas.

4ï¸âƒ£ Archivo .env.test
Crea un archivo .env.test en la raÃ­z de tu proyecto para definir variables de entorno especÃ­ficas para el entorno de testing:

NODE_ENV=test
PG_HOST=localhost
PG_USER=postgres
PG_PASSWORD=tu_contraseÃ±a
PG_DATABASE=nombre_de_tu_base
PG_PORT=5432
PORT=5000

ğŸ” Nota: Si ya estÃ¡s utilizando un archivo .env, puedes duplicarlo como .env.test y adaptar los valores necesarios para pruebas.